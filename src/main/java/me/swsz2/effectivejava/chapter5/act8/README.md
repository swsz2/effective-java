# 타입 안정 이종 컨테이너를 고려하라

## 타입 안정 이종 컨테이너 패턴이란?

### 모르는 단어부터..

    - 컨테이너
        - '저장'을 위한 기본 자료구조는 배열을 생각할 수 있다.
        - 그러나 배열은 크기가 정해지면 늘리거나 줄일 수 없다.
        - 이를 해결하기 위한 방법으로 나온 것이 컨테이너 클래스
         - List, Set, Queue, Map
    - 이종
        - heterogeneous
        - 이질적인?
    
    - 일단 아직도 모르겠으니 좀 더 보자

### 정의

    - 컨테이너 대신 키를 매개변수화한 후 컨테이너에 값을 넣거나 뺄 때 매개변수화한 키를 함께 제공함
        -> 제네릭 타입 시스템이 갑의 타입이 키와 같음을 보장 
        - 클라이언트는 파라미터로 클래스 타입을 제공하고 API는 입력받은 파라미터 타입으로 반환하는 것
            - jackson에서 제공하는 objectMapper를 사용할 때 자주 봤던 패턴이다.

#### jackson.databind.ObjectMapper.java
```java
    public <T> T readValue(byte[]src, Class<T> valueType) throws IOException, JsonParseException, JsonMappingException
```
    - 내부 구현을 보지 않았지만 readValue 메서드가 valueType의 타입의 결과를 반환할 거라는 것을 알 수 있다.
        - 컴파일 타임에 타입 안정성을 확인할 수 있을 거 같다.

### (책에 나온) 장점
    - 컴파일 타임에 타입 안정성을 보장한다.
    - 클라이언트가 반환값을 캐스팅할 필요가 없다.

### (김성원이 생각하는) 장점
    - 책임이 클라이언트 사이드에 있다.
        - 해당 기능을 사용하는 부분에서 오류를 캐치하기 쉽다.
            - 단, 메서드가 안전하다는 전제가 있어야 한다.